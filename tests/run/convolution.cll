void main() {
  int[]@{[0:10]=0,[10:20]=2,[20:30]=4} in[30] = {7 , 5 , 2 , 3 , 7 , 0 , 4 , 2 , 8 , 7 , 6 , 1 , 4 , 9 , 8 , 5 , 5 , 0 , 3 , 3 , 5 , 4 , 1 , 3 , 1 , 0 , 1 , 0 , 9 , 4};
  int[]@{[0:10]=1,[10:20]=3,[20:30]=5} x[30];
  int[]@{[0:5]=10} kernel[5] = {1,1,1,1,1}; // best to duplicate kernel on every core that has input/output
  
  for(i from 0 to 26) {
    x[i] = 0;
    for(j from 0 to 5) {
      x[i] = in[i +@any j] *@place(x[i]) kernel[j] +@place(x[i]) x[i];
    }
  }

  /*for(i from 0 to 16) {
    out(x[i]);
  }*/

  // more efficient
  /*
  for(i from 0 to 96) {
    int@any sum = 0;
    for(j from 0 to 5) {
      sum = sum +@place(sum) in[i + j] * kernel[j];
    }
    x[i] = sum;
  }
  */

}
